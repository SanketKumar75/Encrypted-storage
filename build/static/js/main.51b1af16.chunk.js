(this.webpackJsonptnm=this.webpackJsonptnm||[]).push([[0],{157:function(e,t,n){},180:function(e,t){},182:function(e,t){},192:function(e,t){},194:function(e,t){},221:function(e,t){},223:function(e,t){},224:function(e,t){},229:function(e,t){},231:function(e,t){},237:function(e,t){},239:function(e,t){},258:function(e,t){},270:function(e,t){},273:function(e,t){},281:function(e,t){},307:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(149),s=n.n(c),i=(n(157),n(22)),o=n(5),l=n(7),u=n.n(l),d=n(19),p=n(38),m=n(39),b=n(12),j=(n(58),n.p+"static/media/sign.4e39d923.png"),h=n(150),v=n.n(h).a.create({baseURL:"https://encrypt-image.herokuapp.com/"}),g=n(55),x=n.n(g),f=n(0),O=function(){var e,t,n=Object(o.f)(),r=Object(a.useState)({name:"",password:"",cpassword:"",privateKey:""}),c=Object(b.a)(r,2),s=c[0],l=c[1],h=Object(a.useState)(""),g=Object(b.a)(h,2),O=(g[0],g[1],function(n){console.log(n),e=n.target.name,t=n.target.value,l(Object(m.a)(Object(m.a)({},s),{},Object(p.a)({},e,t)))}),w=function(){var e=document.createElement("a"),t=new Blob([null===s||void 0===s?void 0:s.privateKey],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="privateKey.txt",document.body.appendChild(e),e.click()},y=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,r,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=(null===s||void 0===s?void 0:s.name)){e.next=4;break}return alert("Name is required."),e.abrupt("return");case 4:if(!((null===s||void 0===s?void 0:s.password.length)<8)){e.next=7;break}return alert("password length must be more than 8."),e.abrupt("return");case 7:if((null===s||void 0===s?void 0:s.password)==(null===s||void 0===s?void 0:s.cpassword)){e.next=10;break}return alert("password must be same as confirm password."),e.abrupt("return");case 10:if(""!=(null===s||void 0===s?void 0:s.name)){e.next=13;break}return alert("Private key length must be more than 8."),e.abrupt("return");case 13:return a=x.a.createHash("sha256").update(null===s||void 0===s?void 0:s.password).digest("hex"),e.prev=14,e.next=17,v.post("api/signup",{username:null===s||void 0===s?void 0:s.name,password:a});case 17:return i=e.sent,e.next=20,i.data;case 20:if(i=e.sent,1!=(null===(r=i)||void 0===r?void 0:r.status)){e.next=26;break}return alert(null===(o=i)||void 0===o?void 0:o.msg),w(),n.push("/login"),e.abrupt("return");case 26:alert(null===(c=i)||void 0===c?void 0:c.msg),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(14),alert(e.t0);case 32:case"end":return e.stop()}}),e,null,[[14,29]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:" form d-flex  justify-content-center ",children:Object(f.jsxs)("div",{className:" Homepage-Container p-2 w-50 row mt-5 ",children:[Object(f.jsxs)("div",{className:" mr-5 ml-5 justify-content-center col p-2 ",children:[Object(f.jsxs)("center",{children:[Object(f.jsx)("h2",{className:"text-light",children:" Signup"}),Object(f.jsxs)(i.b,{to:"/login",children:[" ",Object(f.jsx)("p",{className:"text-light smallFont mt-2",children:"Already have an account?"})]})," "]}),Object(f.jsxs)("form",{method:"POST",onSubmit:y,children:[Object(f.jsx)("input",{className:"text-light inputBox",type:"name",name:"name",value:s.name,onChange:O,placeholder:"Userame",required:!0}),Object(f.jsx)("input",{className:"text-light inputBox",type:"password",name:"password",value:s.password,onChange:O,placeholder:"password",required:!0}),Object(f.jsx)("input",{className:"text-light inputBox",type:"password",name:"cpassword",value:s.cpassword,onChange:O,placeholder:"Confirm Password",required:!0}),Object(f.jsx)("input",{className:"text-light inputBox",type:"password",name:"privateKey",id:"privateKeyDownload",value:s.privateKey,onChange:O,placeholder:"Private key",required:!0}),Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"d-flex",children:[Object(f.jsx)("input",{type:"checkbox",id:"terms",value:"Bike"}),Object(f.jsx)("label",{htmlFor:"terms",className:" mx-4",children:"We do not store your private key hence on submiting this form you will a file privateKey.txt will downloaded, you have to upload that privateKey.txt file each time you login. Once you lose file there will not way to retrive your private key and your data, if you are are ready then click on checkbox and move further."})]}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{type:"submit",className:"Logbutton text-light",children:"Sign up"})]})]}),Object(f.jsx)("img",{className:"mt-3 mr-2 border rounded justify-content-right col p-0  imagecss",src:j,alt:"login image",width:"auto",height:"350"})]})})})},w=n.p+"static/media/log.a83399c2.jpg",y=function(){Object(o.f)();var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)({username:"",password:""}),s=Object(b.a)(c,2),l=s[0],j=s[1],h=function(e){var t,n;console.log(e),t=e.target.name,n=e.target.value,j(Object(m.a)(Object(m.a)({},l),{},Object(p.a)({},t,n)))},g=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=new FileReader).onload=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result,console.log(n),r(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),console.log(t.target.files[0]),"privateKey.txt"==(a=t.target.files[0]).name){e.next=8;break}return alert("This file is not correct"),e.abrupt("return");case 8:n.readAsText(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,r,c,s,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=(null===l||void 0===l?void 0:l.username)){e.next=4;break}return alert("Name is required."),e.abrupt("return");case 4:if(!((null===l||void 0===l?void 0:l.password.length)<8)){e.next=7;break}return alert("password length must be more than 8."),e.abrupt("return");case 7:if(!((null===n||void 0===n?void 0:n.length)<8)){e.next=10;break}return alert("Private key file either not correct or does not uploaded."),e.abrupt("return");case 10:return a=x.a.createHash("sha256").update(null===l||void 0===l?void 0:l.password).digest("hex"),e.prev=11,e.next=14,v.post("api/login",{username:null===l||void 0===l?void 0:l.username,password:a});case 14:return s=e.sent,e.next=17,s.data;case 17:if(s=e.sent,console.log(s),1!=(null===(r=s)||void 0===r?void 0:r.status)){e.next=26;break}return console.log(s,"djfjskdjf"),alert(null===(i=s)||void 0===i?void 0:i.msg),window.localStorage.setItem("privateKey",n),window.localStorage.setItem("user",JSON.stringify(null===(o=s)||void 0===o?void 0:o.data)),window.location.replace("/"),e.abrupt("return");case 26:alert(null===(c=s)||void 0===c?void 0:c.msg),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(11),alert(e.t0);case 32:case"end":return e.stop()}}),e,null,[[11,29]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:" form d-flex  justify-content-center ",children:Object(f.jsxs)("div",{className:" Homepage-Container p-2 w-50 row mt-5 ",children:[Object(f.jsxs)("div",{className:" mr-5 ml-5 justify-content-center col p-2 ",children:[Object(f.jsxs)("center",{children:[Object(f.jsx)("h2",{className:"text-light",children:" Login"}),Object(f.jsxs)(i.b,{to:"/signup",children:[" ",Object(f.jsxs)("p",{className:"text-light smallFont mt-2",children:["Dont have an account? click here"," "]})]})]}),Object(f.jsxs)("form",{className:"col  ",method:"POST",children:[Object(f.jsx)("input",{className:"row text-light inputBox inputcss",type:"text",name:"username",placeholder:"username",value:null===l||void 0===l?void 0:l.username,onChange:h,required:!0}),Object(f.jsx)("input",{className:"row  inputBox text-light inputcss",type:"password",name:"password",placeholder:"Password",value:null===l||void 0===l?void 0:l.password,onChange:h,required:!0}),Object(f.jsx)("label",{htmlFor:"keyFile",children:"Upload privateKey file"}),Object(f.jsx)("input",{className:"row inputBox  text-light inputcss",id:"keyFile",type:"file",accept:"text/plain",placeholder:"private key",onChange:g,required:!0}),Object(f.jsx)("button",{className:"Logbutton text-light",onClick:O,children:"Login"})]})]}),Object(f.jsx)("img",{className:"mt-3 mr-2 border rounded justify-content-right col p-0  imagecss",src:w,alt:"login image",width:"auto",height:"300"})]})})})},k=n(46),N=n.n(k),S=function(e){return new Promise((function(t){var n="",a=new FileReader;a.readAsDataURL(e),a.onload=function(){n=a.result,t(n)}}))},C=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:return a=e.sent,r=N.a.AES.encrypt(a,n).toString(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var F=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)({}),s=Object(b.a)(c,2),i=s[0],o=s[1],l=Object(a.useState)({}),p=Object(b.a)(l,2),m=p[0],j=p[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("privateKey"),t=window.localStorage.getItem("user");r(e),o(JSON.parse(t))}),[]);var h=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(m,n);case 3:return r=e.sent,console.log(r),e.next=7,v.post("uploads/one_media",{userId:null===i||void 0===i?void 0:i._id,mediaData:r});case 7:return c=e.sent,e.next=10,c.data;case 10:if(c=e.sent,console.log(c),1!=(null===(t=c)||void 0===t?void 0:t.status)){e.next=16;break}return alert(null===(s=c)||void 0===s?void 0:s.msg),window.location.reload(),e.abrupt("return");case 16:alert(null===(a=c)||void 0===a?void 0:a.msg),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),alert(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{children:Object(f.jsx)("div",{className:" p-0 bd-highlight btny p-0 bd-highlight border-round bg-primary ",children:Object(f.jsxs)("center",{children:[Object(f.jsx)("h5",{className:"mt-1 ml-4 p-2",children:"Upload new file"}),Object(f.jsx)("h6",{className:"mt-1 ml-4",children:"(file size must be less then 50kb otherwise network error arise.)"}),Object(f.jsx)("input",{type:"file",className:" mt-3 mb-0 btn ",accept:"image/*",multiple:!1,onChange:function(e){return j(e.target.files[0])}}),Object(f.jsxs)("button",{onClick:h,className:" w-25 btn btn-success mx-4 my-2 mb-3",children:[" ",Object(f.jsx)("h4",{children:"Upload"})," "," "]})]})})})},L=function(){document.body.style="background: #1DA1F2;";var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)({}),s=Object(b.a)(c,2),i=s[0],o=s[1],l=Object(a.useState)([]),p=Object(b.a)(l,2),m=p[0],j=p[1],h=Object(a.useState)(1),g=Object(b.a)(h,2),x=g[0],O=g[1],w=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,v.get("uploads/all_media/".concat(t,"/").concat(n,"/").concat(a));case 5:return r=e.sent,e.next=8,r.data;case 8:if(r=e.sent,console.log(r),1!=r.status){e.next=18;break}if(0!=r.data.length||0==n){e.next=15;break}return O(n-1),alert("No more data found."),e.abrupt("return");case 15:j(r.data),e.next=19;break;case 18:alert(r.msg);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),alert(e.t0);case 24:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(t,n,a){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=window.localStorage.getItem("privateKey"),t=window.localStorage.getItem("user");e&&t||(alert("Login first."),window.location.assign("/login")),r(e),o(JSON.parse(t))}),[]),Object(a.useEffect)((function(){w(null===i||void 0===i?void 0:i._id,x,5)}),[null===i||void 0===i?void 0:i._id,x,5]),Object(a.useEffect)((function(){!function(e,t){var n=document.getElementById("allMedia");n.innerHTML="",window.innerWidth;try{for(var a in e){var r=document.createElement("div"),c=N.a.AES.decrypt(e[a].mediaData,t).toString(N.a.enc.Utf8);console.log(c),document.createElement("p");var s=new Image;s.src=c,s.classList.add("img-fluid"),s.style.width="50%";var i=document.createElement("a");i.href=c,i.download="image.png",i.classList.add("btn"),i.classList.add("btn-success"),i.classList.add("text-center"),i.classList.add("my-3"),i.text="Download";var o=document.createElement("br"),l=document.createElement("hr");r.appendChild(s),r.appendChild(o),r.appendChild(i),r.appendChild(l),r.style.margin="10px",n.appendChild(r)}}catch(u){alert(u+" Meybe you have uploaded wrong key."),window.localStorage.removeItem("privateKey"),window.localStorage.removeItem("user"),window.location.assign("/login")}}(m,n)}),[m.length]);var y=window.localStorage.getItem("imgUrl");return console.log(y),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"",children:Object(f.jsxs)("div",{className:"w-50 container d-flex flex-column bd-highlight mb-3 mt-5 shadow-lg p-0 mb-5 bg-light  border-round2 ",children:[Object(f.jsxs)("div",{className:"d-flex justify-content-between p-0 bd-highlight border-round1  bg-success mt-0 mb-0 ml-0 mr-0 px-5 ",children:[Object(f.jsxs)("h2",{className:" mt-4 mb-4",children:["Greetings! ",null===i||void 0===i?void 0:i.username]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{onClick:function(){window.localStorage.removeItem("privateKey"),window.localStorage.removeItem("user"),window.location.assign("/login")},className:"mt-3 mb-3 btn btn-warning ",children:Object(f.jsx)("h4",{children:"Logout"})})})]}),Object(f.jsxs)("div",{className:"p-0 bd-highlight  bg-light  ",children:[Object(f.jsx)("center",{children:Object(f.jsx)("h4",{className:"card-title mt-0 p-3",children:"Here are your uploaded photos"})}),Object(f.jsx)("div",{className:" d-flex justify-content-between flex-column  ",children:Object(f.jsx)("center",{children:Object(f.jsx)("div",{id:"allMedia",className:"w-100"})})}),Object(f.jsxs)("div",{className:"d-flex  justify-content-center ",children:[1!=x?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("button",{className:" btn btn-danger",onClick:function(){O((function(e){return e-1}))},children:"Previous"})}):null,5==m.length?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("button",{className:"btn btn-danger ",style:{marginLeft:"20px"},onClick:function(){O((function(e){return e+1}))},children:"Next"})}):null]})]}),Object(f.jsx)(F,{})]})})})};n(306);var I=function(){return document.body.style="background: #1DA1F2;",Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(i.a,{children:Object(f.jsxs)(o.c,{children:[Object(f.jsx)(o.a,{exact:!0,path:"/",component:L}),Object(f.jsx)(o.a,{exact:!0,path:"/signup",component:O}),Object(f.jsx)(o.a,{exact:!0,path:"/login",component:y}),Object(f.jsx)(o.a,{component:y})]})})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,308)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(I,{})}),document.getElementById("root")),K()},58:function(e,t,n){}},[[307,1,2]]]);
//# sourceMappingURL=main.51b1af16.chunk.js.map